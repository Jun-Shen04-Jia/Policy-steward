"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var l,o,r=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(l=n.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var FrostifyModals=function(){function O(){_classCallCheck(this,O),this.preparedSettings=[],this.lastModalId=0,this.config=this.prepareModalSettings(),this.bindAttributeModals()}return _createClass(O,[{key:"setConfig",value:function(){}},{key:"show",value:function(){return document.body.appendChild(O.prepareModal(this.preparedSettings[this.lastModalId])),this}},{key:"close",value:function(){var e=(e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.preparedSettings[this.lastModalId].id,t=!0;return(t=(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==this.preparedSettings[e]&&this.preparedSettings[e].onCancel&&!1===this.preparedSettings[e].onCancel()?!1:t)&&O.closeModal(e),this}},{key:"submit",value:function(){var e=(e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.preparedSettings[this.lastModalId].id,t=!0;return(t=void 0!==this.preparedSettings[e]&&this.preparedSettings[e].onOk&&!1===this.preparedSettings[e].onOk()?!1:t)&&O.closeModal(e),this}},{key:"set",value:function(e){return this.lastModalId++,this.preparedSettings[this.lastModalId]=this.prepareModalSettings(e),this}},{key:"prepareModalSettings",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{id:this.lastModalId,title:null!==(e=t.title)&&void 0!==e?e:"",content:null!==(e=t.content)&&void 0!==e?e:"",onOk:null!==(e=t.onOk)&&void 0!==e?e:"",onCancel:null!==(e=t.onCancel)&&void 0!==e?e:null,isClosable:!1!==t.isClosable,isDraggable:!1!==t.isDraggable,reverseButtons:!0===t.reverseButtons,labels:{ok:null!==(e=null===(e=t.labels)||void 0===e?void 0:e.ok)&&void 0!==e?e:"Okay",cancel:null!==(e=null===(e=t.labels)||void 0===e?void 0:e.cancel)&&void 0!==e?e:"Cancel"},wrapperStyles:null!==(e=t.wrapperStyles)&&void 0!==e?e:{},containerStyles:null!==(e=t.containerStyles)&&void 0!==e?e:{},headerStyles:null!==(e=t.headerStyles)&&void 0!==e?e:{},bodyStyles:null!==(e=t.bodyStyles)&&void 0!==e?e:{},footerStyles:null!==(e=t.footerStyles)&&void 0!==e?e:{},buttonsStyles:null!==(t=t.buttonsStyles)&&void 0!==t?t:{}}}},{key:"bindAttributeModals",value:function(){var n=this;document.querySelectorAll("[data-modal]").forEach(function(t){t.onclick=function(){var e=document.querySelector("#".concat(t.dataset.modal)),e=e?e.innerHTML:t.dataset.modal;n.set({title:t.dataset.modalTitle,content:e}).show()}})}}],[{key:"closeModal",value:function(e){var t=document.querySelector('.fmodal-wrapper[data-id="'.concat(e,'"]'));t.style.animation="fadeOut 0.25s ease 0s 1 normal forwards",t.style.opacity="0",setTimeout(function(){return t.remove()},250)}},{key:"prepareModal",value:function(t){var n=document.createElement("div"),e=document.createElement("div"),l=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),i=document.createElement("button"),s=document.createElement("button");a.classList.add("fmodal-close"),a.onclick=function(){return FrostifyModal.close(t.id,!1)},a.innerText="X",l.classList.add("fmodal-header"),l.classList.toggle("fmodal-draggable",t.isDraggable),l.innerHTML=t.title,l.ondragover=function(e){return O.dragOver(e)},!0===t.isClosable&&l.appendChild(a);for(var d=0,c=Object.entries(t.headerStyles);d<c.length;d++){var u=_slicedToArray(c[d],2),y=u[0],u=u[1];l.style[y]=u}o.classList.add("fmodal-body"),o.innerHTML=t.content;for(var f=0,p=Object.entries(t.bodyStyles);f<p.length;f++){var v=_slicedToArray(p[f],2),m=v[0],v=v[1];o.style[m]=v}i.classList.add("fmodal-button","fmodal-cancel"),i.onclick=function(){return FrostifyModal.close(t.id)},i.innerHTML=t.labels.cancel,s.classList.add("fmodal-button","fmodal-accept"),s.onclick=function(){return FrostifyModal.submit(t.id)},s.innerHTML=t.labels.ok;for(var h=0,b=Object.entries(t.buttonsStyles);h<b.length;h++){var g=_slicedToArray(b[h],2),S=g[0],g=g[1];i.style[S]=g,s.style[S]=g}t.reverseButtons&&(i.style.float="right",s.style.float="none"),r.classList.add("fmodal-footer"),r.appendChild(i),r.appendChild(s);for(var k=0,M=Object.entries(t.footerStyles);k<M.length;k++){var C=_slicedToArray(M[k],2),A=C[0],C=C[1];r.style[A]=C}e.classList.add("fmodal-container"),e.setAttribute("aria-labelledby",t.title),e.setAttribute("aria-modal","true"),e.appendChild(l),e.appendChild(o),e.appendChild(r);for(var T=0,_=Object.entries(t.containerStyles);T<_.length;T++){var w=_slicedToArray(_[T],2),L=w[0],w=w[1];r.style[L]=w}return t.isDraggable&&O.makeDraggable(e),n.classList.add("fmodal-wrapper"),n.dataset.id=t.id,n.appendChild(e),!0===t.isClosable&&(n.onclick=function(e){e.path[0]===n&&O.closeModal(t.id)},document.onkeydown=function(e){"Escape"===e.key&&O.closeModal(t.id)}),n}},{key:"makeDraggable",value:function(t){var n=0,l=0,o=0,r=0;function e(e){(e=e||window.event).preventDefault(),o=e.clientX,r=e.clientY,document.onmouseup=i,document.onmousemove=a}function a(e){(e=e||window.event).preventDefault(),n=o-e.clientX,l=r-e.clientY,o=e.clientX,r=e.clientY,t.style.top=t.offsetTop-l+"px",t.style.left=t.offsetLeft-n+"px",t.style.position="absolute",t.parentElement.style.display="block"}function i(){document.onmouseup=null,document.onmousemove=null}t.querySelector(".fmodal-header")?t.querySelector(".fmodal-header").onmousedown=e:t.onmousedown=e}}]),O}(),FrostifyModal=new FrostifyModals;